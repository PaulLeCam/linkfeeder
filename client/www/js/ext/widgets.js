(function(){define(["core/util","core/dom","core/promise","core/store","core/dev"],function(e,t,n,r,i){var s,o,u;return u=new r,o=new r,s={},{load:function(e){var t;return t=s[e]!=null?s[e]:s[e]=n.deferred(),require(["widgets/"+e],t.resolve,function(n){return i.warn("Error trying to initialize widget `"+e+"`",n),t.reject(n)}),t.promise()},initialize:function(t,i){var s;return s=n.deferred(),this.load(t).fail(s.reject).done(function(n){var a,f,l;return e.isObject(i)||(i={el:i}),l=new n(i),o.has(i.el)||o.set(i.el,new r),a=o.get(i.el),a.set(t,l),u.has(t)||u.set(t,new r),f=u.get(t),f.set(i.el,l),s.resolve(l)}),s.promise()},start:function(t,n){var r,s,a,f,l,c,h,p,d;if(t==null||n==null||t==="*"&&n==="*")return i.warn("Wrong parameters to start widget",t,n),this;if(n==="*"){if(s=u.get(t)){p=s.values();for(f=0,c=p.length;f<c;f++)a=p[f],a.start()}}else{e.isObject(n)||(n={el:n});if(r=o.get(n.el))if(t==="*"){d=r.values();for(l=0,h=d.length;l<h;l++)a=d[l],a.start(n)}else(a=r.get(t))?a.start(n):this.initialize(t,n).done(function(e){return e.start(n)});else this.initialize(t,n).done(function(e){return e.start(n)})}return this},stop:function(e,t){var n,r,s,a,f,l,c,h,p;if(e==null||t==null||e==="*"&&t==="*")return i.warn("Wrong parameters to stop widget",e,t),this;if(t==="*"){if(r=u.get(e)){h=r.values();for(a=0,l=h.length;a<l;a++)s=h[a],s.stop()}}else if(n=o.get(t))if(e==="*"){p=n.values();for(f=0,c=p.length;f<c;f++)s=p[f],s.stop()}else(s=n.get(e))&&s.stop();return this},remove:function(e){var n,r,s,a,f,l;if(e==null||e==="*")return i.warn("Wrong parameters to remove widget",e),this;if(n=o.get(e)){l=n.keys();for(a=0,f=l.length;a<f;a++)r=l[a],n.get(r).remove(),(s=u.get(e))&&s["delete"](e);o["delete"](e)}else t.find(e).remove();return this}}})}).call(this);